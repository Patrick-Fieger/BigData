var anzahl = 5
, request = require('request')
, async = require('async')
, fs = require('fs-extra')

var api_url = "http://krk.data.fr24.com/zones/fcgi/feed.js?bounds=68.06655870762545,47.468422366083004,-39.29392968750062,-117.7734375&faa=1&mlat=1&flarm=1&adsb=1&gnd=1&air=1&vehicles=1&estimated=1&maxage=900&gliders=1&stats=1&"
var api_detail_url = "http://bma.data.fr24.com/_external/planedata_json.1.4.php?";

var airlines = {"RNX":{"name":"1Time","amount":0},"TUS":{"name":"ABSA Cargo","amount":0},"ABX":{"name":"ABX Air","amount":0},"RUN":{"name":"ACT Airlines","amount":0},"ADR":{"name":"Adria Airways","amount":0},"AEE":{"name":"Aegean Airlines","amount":0},"EIN":{"name":"Aer Lingus","amount":0},"NIG":{"name":"Aero Contractors","amount":0},"UCR":{"name":"Aero-Charter Airlines","amount":0},"DNC":{"name":"Aerodynamics","amount":0},"AFL":{"name":"Aeroflot","amount":0},"ARG":{"name":"Aerolineas Argentinas","amount":0},"MAF":{"name":"Aerolineas Mas","amount":0},"BOX":{"name":"AeroLogic","amount":0},"TAO":{"name":"Aeromar","amount":0},"AMX":{"name":"Aeromexico","amount":0},"SLI":{"name":"Aerom√©xico Connect","amount":0},"AEW":{"name":"Aerosvit Airlines","amount":0},"TNO":{"name":"AeroUnion","amount":0},"AJI":{"name":"Afghan Jet International","amount":0},"AXK":{"name":"African Express Airways","amount":0},"AAW":{"name":"Afriqiyah Airways","amount":0},"AAF":{"name":"Aigle Azur","amount":0},"DAH":{"name":"Air Algerie","amount":0},"MMD":{"name":"Air Alsie","amount":0},"GUY":{"name":"Air Antilles Express","amount":0},"ABY":{"name":"Air Arabia","amount":0},"RBG":{"name":"Air Arabia Egypt","amount":0},"MAC":{"name":"Air Arabia Maroc","amount":0},"ARR":{"name":"Air Armenia","amount":0},"KZR":{"name":"Air Astana","amount":0},"ABD":{"name":"Air Atlanta Icelandic","amount":0},"AAG":{"name":"Air Atlantique","amount":0},"REU":{"name":"Air Austral","amount":0},"BTI":{"name":"Air Baltic","amount":0},"BER":{"name":"Air Berlin","amount":0},"EAA":{"name":"Air Bishkek","amount":0},"BOT":{"name":"Air Botswana","amount":0},"BUR":{"name":"Air Bucharest","amount":0},"VBW":{"name":"Air Burkina","amount":0},"ABL":{"name":"Air Busan","amount":0},"MSC":{"name":"Air Cairo","amount":0},"TPC":{"name":"Air Caledonie","amount":0},"ACA":{"name":"Air Canada","amount":0},"ROU":{"name":"Air Canada rouge","amount":0},"FWI":{"name":"Air Caraibes","amount":0},"ACX":{"name":"Air Cargo Germany","amount":0},"ACE":{"name":"Air Charter Africa","amount":0},"CCA":{"name":"Air China","amount":0},"CAO":{"name":"Air China Cargo","amount":0},"ABR":{"name":"Air Contractors","amount":0},"CCM":{"name":"Air Corsica","amount":0},"LBR":{"name":"Air Costa","amount":0},"VRE":{"name":"Air Cote d'Ivoire","amount":0},"CRQ":{"name":"Air Creebec","amount":0},"ADO":{"name":"Air Do","amount":0},"DLA":{"name":"Air Dolomiti","amount":0},"AEA":{"name":"Air Europa","amount":0},"AFR":{"name":"Air France","amount":0},"GGN":{"name":"Air Georgian","amount":0},"AGY":{"name":"Air Go Airlines","amount":0},"GRL":{"name":"Air Greenland","amount":0},"AHO":{"name":"Air Hamburg","amount":0},"AHK":{"name":"Air Hong Kong","amount":0},"FXI":{"name":"Air Iceland","amount":0},"AIC":{"name":"Air India","amount":0},"AXB":{"name":"Air India Express","amount":0},"LLR":{"name":"Air India Regional","amount":0},"MPK":{"name":"Air Indus","amount":0},"AIE":{"name":"Air Inuit","amount":0},"AEY":{"name":"Air Italy","amount":0},"KBZ":{"name":"Air KBZ","amount":0},"KOR":{"name":"Air Koryo","amount":0},"LYN":{"name":"Air Kyrgyzstan","amount":0},"TLR":{"name":"Air Libya","amount":0},"AMU":{"name":"Air Macau","amount":0},"MDG":{"name":"Air Madagascar","amount":0},"AMC":{"name":"Air Malta","amount":0},"MAU":{"name":"Air Mauritius","amount":0},"BIE":{"name":"Air Mediterranee","amount":0},"MHS":{"name":"Air Memphis","amount":0},"MLD":{"name":"Air Moldova","amount":0},"NMB":{"name":"Air Namibia","amount":0},"ANZ":{"name":"Air New Zealand","amount":0},"ANG":{"name":"Air Niugini","amount":0},"ANT":{"name":"Air North","amount":0},"ANE":{"name":"Air Nostrum","amount":0},"ONX":{"name":"Air Onix","amount":0},"PST":{"name":"Airwork","amount":0},"SPM":{"name":"Air Saint-Pierre","amount":0},"SEY":{"name":"Air Seychelles","amount":0},"VTA":{"name":"Air Tahiti","amount":0},"THT":{"name":"Air Tahiti Nui","amount":0},"ATC":{"name":"Air Tanzania","amount":0},"TSC":{"name":"Air Transat","amount":0},"ATN":{"name":"Air Transport International","amount":0},"URG":{"name":"Air Urga","amount":0},"AVN":{"name":"Air Vanuatu","amount":0},"VIM":{"name":"Air Via","amount":0},"AZW":{"name":"Air Zimbabwe","amount":0},"AXM":{"name":"AirAsia","amount":0},"IAD":{"name":"AirAsia India","amount":0},"XAX":{"name":"AirAsia X","amount":0},"EZD":{"name":"AirAsia Zest","amount":0},"ABQ":{"name":"AirBlue","amount":0},"ABW":{"name":"AirBridgeCargo Airlines","amount":0},"AIB":{"name":"Airbus","amount":0},"BGA":{"name":"Airbus Transport International","amount":0},"ACI":{"name":"Aircalin","amount":0},"AXE":{"name":"AirExplore","amount":0},"AFE":{"name":"Airfast Indonesia","amount":0},"TOK":{"name":"Airlines of PNG","amount":0},"LNK":{"name":"Airlink","amount":0},"ANO":{"name":"Airnorth","amount":0},"ASL":{"name":"AirSERBIA","amount":0},"TRS":{"name":"AirTran","amount":0},"PNX":{"name":"AIS Airlines","amount":0},"BGM":{"name":"Ak Bars Aero","amount":0},"MHK":{"name":"Al-Naser Airlines","amount":0},"ASA":{"name":"Alaska Airlines","amount":0},"AER":{"name":"Alaska Central Express","amount":0},"LBC":{"name":"Albanian Airlines","amount":0},"LAV":{"name":"AlbaStar","amount":0},"AZA":{"name":"Alitalia","amount":0},"CYL":{"name":"Alitalia CityLiner","amount":0},"ANA":{"name":"All Nippon Airways","amount":0},"AAY":{"name":"Allegiant Air","amount":0},"UTY":{"name":"Alliance Airlines","amount":0},"AJK":{"name":"Allied Air","amount":0},"LMU":{"name":"AlMasria Universal Airlines","amount":0},"AAH":{"name":"Aloha Airlines","amount":0},"DRU":{"name":"Alrosa","amount":0},"APF":{"name":"Amapola Flyg","amount":0},"AAL":{"name":"American Airlines","amount":0},"AMF":{"name":"Ameriflight","amount":0},"AJT":{"name":"Amerijet International","amount":0},"AJA":{"name":"AnadoluJet","amount":0},"AGU":{"name":"Angara Airlines","amount":0},"ADB":{"name":"Antonov Design Bureau","amount":0},"ABV":{"name":"Antrak Air","amount":0},"AZE":{"name":"Arcus-Air","amount":0},"AFG":{"name":"Ariana Afghan Airlines","amount":0},"ARA":{"name":"Arik Air","amount":0},"TFL":{"name":"Arke","amount":0},"AIZ":{"name":"Arkia Israeli Airlines","amount":0},"RNV":{"name":"Armavia","amount":0},"OCA":{"name":"Aserca Airlines","amount":0},"AWM":{"name":"Asian Wings Airways","amount":0},"AAR":{"name":"Asiana Airlines","amount":0},"AZI":{"name":"Astra Airlines","amount":0},"TBZ":{"name":"ATA Airlines","amount":0},"AYZ":{"name":"Atlant-Soyuz Airlines","amount":0},"NPT":{"name":"Atlantic Airlines","amount":0},"FLI":{"name":"Atlantic Airways","amount":0},"GTI":{"name":"Atlas Air","amount":0},"BMM":{"name":"Atlas Blue","amount":0},"KKK":{"name":"Atlasjet","amount":0},"VAS":{"name":"Atran","amount":0},"LSK":{"name":"Aurela","amount":0},"AUR":{"name":"Aurigny Air Services","amount":0},"SHU":{"name":"Aurora","amount":0},"AUT":{"name":"Austral","amount":0},"AUA":{"name":"Austrian Airlines","amount":0},"VNR":{"name":"Avantair","amount":0},"PHW":{"name":"AVE.com","amount":0},"AVJ":{"name":"Avia Traffic","amount":0},"AZS":{"name":"Aviacon Zitotrans","amount":0},"CHP":{"name":"Aviacsa","amount":0},"ERG":{"name":"Aviaenergo","amount":0},"AVA":{"name":"Avianca","amount":0},"ONE":{"name":"Avianca Brasil","amount":0},"TPA":{"name":"Avianca Cargo","amount":0},"GLG":{"name":"Avianca Ecuador","amount":0},"VIT":{"name":"Aviastar Mandiri","amount":0},"TUP":{"name":"Aviastar-TU","amount":0},"GUG":{"name":"Aviateca","amount":0},"KCA":{"name":"Aviatrans K","amount":0},"SMJ":{"name":"Avient Aviation","amount":0},"AIA":{"name":"Avies","amount":0},"NVD":{"name":"Avion Express","amount":0},"ROI":{"name":"Avior Airlines","amount":0},"ETS":{"name":"AviTrans","amount":0},"AHY":{"name":"Azerbaijan Airlines","amount":0},"AZU":{"name":"Azul Brazilian Airlines","amount":0},"KTK":{"name":"Azur Air","amount":0},"BON":{"name":"B&amp;H Airlines","amount":0},"CFE":{"name":"BA CityFlyer","amount":0},"BHS":{"name":"Bahamasair","amount":0},"BKP":{"name":"Bangkok Airways","amount":0},"BTV":{"name":"Batavia Air","amount":0},"BTK":{"name":"Batik Air","amount":0},"BLS":{"name":"Bearskin Airlines","amount":0},"BEK":{"name":"Bek Air","amount":0},"BHP":{"name":"Belair Airlines","amount":0},"BRU":{"name":"Belavia","amount":0},"LBY":{"name":"Belle Air","amount":0},"BAL":{"name":"Belle Air Europe","amount":0},"BVT":{"name":"Berjaya Air","amount":0},"BGH":{"name":"BH Air","amount":0},"BBC":{"name":"Biman Bangladesh Airlines","amount":0},"BID":{"name":"BinAir","amount":0},"IBB":{"name":"Binter Canarias","amount":0},"BMS":{"name":"Blue Air","amount":0},"BDA":{"name":"Blue Dart Aviation","amount":0},"BCI":{"name":"Blue Islands","amount":0},"BLE":{"name":"Blue Line","amount":0},"BPA":{"name":"Blue Panorama Airlines","amount":0},"BWG":{"name":"Blue Wings","amount":0},"BLF":{"name":"Blue1","amount":0},"BBG":{"name":"Bluebird Airways","amount":0},"BBZ":{"name":"Bluebird Aviation","amount":0},"BBD":{"name":"Bluebird Cargo","amount":0},"BMA":{"name":"BMI","amount":0},"BMR":{"name":"BMI Regional","amount":0},"BOE":{"name":"Boeing","amount":0},"BOV":{"name":"Boliviana de Aviacion","amount":0},"BND":{"name":"Bond offshore helicopters","amount":0},"BOO":{"name":"Bookajet","amount":0},"BRJ":{"name":"Borajet","amount":0},"BQB":{"name":"BQB Lineas Aereas","amount":0},"BRX":{"name":"Braathens Regional","amount":0},"BHL":{"name":"Bristow Helicopters","amount":0},"BAW":{"name":"British Airways","amount":0},"SHT":{"name":"British Airways Shuttle","amount":0},"BEL":{"name":"Brussels Airlines","amount":0},"BHA":{"name":"Buddha Air","amount":0},"LZB":{"name":"Bulgaria Air","amount":0},"BUC":{"name":"Bulgarian Air Charter","amount":0},"BRQ":{"name":"Buraq Air","amount":0},"BCC":{"name":"Business Air","amount":0},"ICL":{"name":"CAL Cargo Air Lines","amount":0},"CAV":{"name":"Calm Air","amount":0},"CRC":{"name":"Camair-Co","amount":0},"KHV":{"name":"Cambodia Angkor Air","amount":0},"MPE":{"name":"Canadian North","amount":0},"CNF":{"name":"CanaryFly","amount":0},"CJA":{"name":"Canjet Airlines","amount":0},"KAP":{"name":"Cape Air","amount":0},"CBJ":{"name":"Capital Airlines","amount":0},"CJT":{"name":"Cargojet Airways","amount":0},"CLX":{"name":"Cargolux","amount":0},"ICV":{"name":"Cargolux Italia","amount":0},"BWA":{"name":"Caribbean Airlines","amount":0},"KRP":{"name":"Carpatair","amount":0},"CPN":{"name":"Caspian Airlines","amount":0},"CPA":{"name":"Cathay Pacific","amount":0},"CAY":{"name":"Cayman Airways","amount":0},"CEB":{"name":"CEBU Pacific Air","amount":0},"CEL":{"name":"Ceiba Intercontinental","amount":0},"JBR":{"name":"Central Connect Airlines","amount":0},"GLR":{"name":"Central Mountain Air","amount":0},"CWC":{"name":"Centurion Air Cargo","amount":0},"CHQ":{"name":"Chautauqua Airlines","amount":0},"HKS":{"name":"CHC Helicopter","amount":0},"UEA":{"name":"Chengdu Airlines","amount":0},"CAL":{"name":"China Airlines","amount":0},"CKK":{"name":"China Cargo Airlines","amount":0},"CES":{"name":"China Eastern Airlines","amount":0},"HXA":{"name":"China Express Airlines","amount":0},"CYZ":{"name":"China Postal Airlines","amount":0},"CSN":{"name":"China Southern Airlines","amount":0},"CUA":{"name":"China United Airlines","amount":0},"CHB":{"name":"China West Air","amount":0},"CQN":{"name":"Chongqing Airlines","amount":0},"CIM":{"name":"Cimber","amount":0},"RUS":{"name":"Cirrus Airlines","amount":0},"CTV":{"name":"Citilink","amount":0},"BCY":{"name":"Cityjet","amount":0},"BPS":{"name":"Citywing","amount":0},"AIS":{"name":"Clickair","amount":0},"JTE":{"name":"Cobham","amount":0},"COM":{"name":"Comair","amount":0},"CXB":{"name":"Comlux Aruba","amount":0},"CLA":{"name":"Comlux Aviation","amount":0},"MLM":{"name":"Comlux Aviation Malta","amount":0},"CFG":{"name":"Condor","amount":0},"VCV":{"name":"Conviasa","amount":0},"CMP":{"name":"Copa Airlines","amount":0},"RPB":{"name":"Copa Airlines Colombia","amount":0},"CAI":{"name":"Corendon Airlines","amount":0},"CRL":{"name":"Corsair","amount":0},"CTN":{"name":"Croatia Airlines","amount":0},"CRA":{"name":"Cronos Airlines","amount":0},"CUB":{"name":"Cubana","amount":0},"RGN":{"name":"Cygnus Air","amount":0},"CYP":{"name":"Cyprus Airways","amount":0},"CEF":{"name":"Czech Air Force","amount":0},"CSA":{"name":"Czech Airlines","amount":0},"DAO":{"name":"Daallo Airlines","amount":0},"DAN":{"name":"Dana Air","amount":0},"DTR":{"name":"Danish Air Transport","amount":0},"VPA":{"name":"Danube Wings","amount":0},"DCS":{"name":"DC-Aviation","amount":0},"DER":{"name":"Deer Jet","amount":0},"DAL":{"name":"Delta Air Lines","amount":0},"DNM":{"name":"Denim Air","amount":0},"DHK":{"name":"DHL Air","amount":0},"DHX":{"name":"DHL International","amount":0},"DCT":{"name":"Directflight","amount":0},"HSV":{"name":"Direktflyg","amount":0},"DCV":{"name":"Discovery Air","amount":0},"UDN":{"name":"Dniproavia","amount":0},"DMO":{"name":"Domodedovo Airlines","amount":0},"DNV":{"name":"Donavia","amount":0},"EPA":{"name":"Donghai Airlines","amount":0},"DNU":{"name":"DOT - Danu oro transportas","amount":0},"DRK":{"name":"Druk Air","amount":0},"DUB":{"name":"Dubai Air Wing","amount":0},"DBK":{"name":"Dubrovnik Airline","amount":0},"DNL":{"name":"Dutch Antilles Express","amount":0},"CND":{"name":"Dutch Corendon Airlines","amount":0},"DYA":{"name":"Dynamic Airways","amount":0},"EGS":{"name":"Eagles Airlines","amount":0},"ETJ":{"name":"East Air","amount":0},"ESR":{"name":"Eastar Jet","amount":0},"EZE":{"name":"Eastern Airways","amount":0},"EAQ":{"name":"Eastern Australia Airlines","amount":0},"ESJ":{"name":"Eastern SkyJets","amount":0},"EFY":{"name":"Easyfly","amount":0},"EZY":{"name":"EasyJet","amount":0},"EZS":{"name":"EasyJet Switzerland","amount":0},"BCS":{"name":"EAT Leipzig","amount":0},"EDW":{"name":"Edelweiss Air","amount":0},"MSR":{"name":"EgyptAir","amount":0},"MSX":{"name":"EgyptAir Cargo","amount":0},"ELY":{"name":"El Al","amount":0},"ELB":{"name":"Ellinair","amount":0},"UAE":{"name":"Emirates","amount":0},"CFS":{"name":"Empire Airlines","amount":0},"MJE":{"name":"Empire Aviation","amount":0},"FLG":{"name":"Endeavor Air","amount":0},"ENJ":{"name":"Enerjet","amount":0},"ENT":{"name":"Enter Air","amount":0},"ERR":{"name":"Era Alaska","amount":0},"ERH":{"name":"ERA Aviation","amount":0},"ERT":{"name":"Eritrean Airlines","amount":0},"ESF":{"name":"Estafeta Carga Aerea","amount":0},"ELL":{"name":"Estonian Air","amount":0},"ETH":{"name":"Ethiopian Airlines","amount":0},"ETD":{"name":"Etihad Airways","amount":0},"DWT":{"name":"Etihad Regional","amount":0},"EAK":{"name":"Euro-Asia Air","amount":0},"EUP":{"name":"EuroAir","amount":0},"MMZ":{"name":"EuroAtlantic Airways","amount":0},"FPO":{"name":"Europe Airpost","amount":0},"EWG":{"name":"Eurowings","amount":0},"EVA":{"name":"EVA Air","amount":0},"EVE":{"name":"Evelop Airlines","amount":0},"VTS":{"name":"Everts Air Alaska","amount":0},"XSR":{"name":"Executive AirShare","amount":0},"XAR":{"name":"Express Air","amount":0},"ASQ":{"name":"ExpressJet","amount":0},"BTA":{"name":"ExpressJet Airlines","amount":0},"EZA":{"name":"Eznis Airways","amount":0},"FAO":{"name":"Falcon Air Express","amount":0},"FEA":{"name":"Far Eastern Air Transport","amount":0},"FAT":{"name":"Farnair Switzerland","amount":0},"FTZ":{"name":"Fastjet","amount":0},"FDX":{"name":"FedEx","amount":0},"FXX":{"name":"Felix Airways","amount":0},"FJI":{"name":"Fiji Airways","amount":0},"FIN":{"name":"Finnair","amount":0},"FFM":{"name":"Firefly","amount":0},"FAB":{"name":"First Air","amount":0},"FLE":{"name":"Flair Airlines","amount":0},"FXT":{"name":"Flex Flight","amount":0},"FCK":{"name":"Flight Calibration Services","amount":0},"FJM":{"name":"Fly Jamaica","amount":0},"FFV":{"name":"Fly540","amount":0},"BEE":{"name":"Flybe","amount":0},"FDB":{"name":"FlyDubai","amount":0},"VQI":{"name":"FlyMe","amount":0},"KNE":{"name":"Flynas","amount":0},"FHY":{"name":"Freebird Airlines","amount":0},"CTM":{"name":"French Air Force","amount":0},"FFT":{"name":"Frontier Airlines","amount":0},"FDA":{"name":"Fuji Dream Airlines","amount":0},"GBK":{"name":"Gabon Airlines","amount":0},"GMA":{"name":"Gama Aviation","amount":0},"GIA":{"name":"Garuda Indonesia","amount":0},"GZP":{"name":"Gazpromavia","amount":0},"TGZ":{"name":"Georgian Airways","amount":0},"GNN":{"name":"Georgian Int. Airlines","amount":0},"GHY":{"name":"German Sky Airlines","amount":0},"GMI":{"name":"Germania","amount":0},"GSW":{"name":"Germania Flug","amount":0},"GWI":{"name":"Germanwings","amount":0},"GLP":{"name":"Globus","amount":0},"GMG":{"name":"GMG Airlines","amount":0},"GOW":{"name":"Go Air","amount":0},"GJS":{"name":"GoJet ","amount":0},"GLO":{"name":"GOL Transportes Aeros","amount":0},"GMR":{"name":"Golden Myanmar Airlines","amount":0},"GOM":{"name":"Gomelavia","amount":0},"GDC":{"name":"Grand China Air","amount":0},"GLA":{"name":"Great Lakes Aviation","amount":0},"GOZ":{"name":"Grozny Avia","amount":0},"GFA":{"name":"Gulf Air","amount":0},"CHH":{"name":"Hainan Airlines","amount":0},"HAY":{"name":"Hamburg Airways","amount":0},"HGR":{"name":"Hangar 8","amount":0},"HAL":{"name":"Hawaiian Airlines","amount":0},"HBH":{"name":"Hebei Airlines","amount":0},"HTH":{"name":"Helitt Lineas Aereas","amount":0},"OAW":{"name":"Helvetic Airways","amount":0},"HMS":{"name":"Hemus Air","amount":0},"HRM":{"name":"Hermes Airlines","amount":0},"HER":{"name":"Hex Air","amount":0},"HFY":{"name":"Hi Fly","amount":0},"HCC":{"name":"Holidays Czech Airlines","amount":0},"CRK":{"name":"Hong Kong Airlines","amount":0},"HDA":{"name":"Hong Kong Dragon Airlines","amount":0},"HKE":{"name":"Hong Kong Express","amount":0},"HOP":{"name":"HOP!","amount":0},"QXE":{"name":"Horizon Air","amount":0},"MML":{"name":"Hunnu Air","amount":0},"RSY":{"name":"I-Fly","amount":0},"IBE":{"name":"Iberia","amount":0},"IBS":{"name":"Iberia Express","amount":0},"IBX":{"name":"Ibex Airlines","amount":0},"ICE":{"name":"Icelandair","amount":0},"KAR":{"name":"Ikar","amount":0},"IAC":{"name":"Indian Airlines","amount":0},"IGO":{"name":"IndiGo Airlines","amount":0},"AWQ":{"name":"Indonesia AirAsia","amount":0},"INC":{"name":"Insel Air","amount":0},"INX":{"name":"Inter Airlines","amount":0},"ILN":{"name":"Interair South Africa","amount":0},"AIJ":{"name":"Interjet","amount":0},"ISK":{"name":"InterSky","amount":0},"IAE":{"name":"IrAero","amount":0},"IRA":{"name":"Iran Air","amount":0},"IRB":{"name":"Iran Air Tours","amount":0},"IRC":{"name":"Iran Aseman Airlines","amount":0},"IAW":{"name":"Iraqi Airways","amount":0},"MKU":{"name":"Island Air (USA)","amount":0},"ISW":{"name":"Islas Airways","amount":0},"ISR":{"name":"Israir Airlines","amount":0},"IZA":{"name":"Izhavia","amount":0},"JAE":{"name":"Jade Cargo International","amount":0},"JAL":{"name":"Japan Airlines","amount":0},"JTA":{"name":"Japan Transocean Air","amount":0},"JZR":{"name":"Jazeera Airways","amount":0},"JZA":{"name":"Jazz Air","amount":0},"JJA":{"name":"Jeju Air","amount":0},"JAI":{"name":"Jet Airways","amount":0},"JTG":{"name":"Jet Time","amount":0},"JTF":{"name":"Jet Time OY","amount":0},"EXS":{"name":"Jet2","amount":0},"JFU":{"name":"Jet4You","amount":0},"JAF":{"name":"Jetairfly","amount":0},"JBU":{"name":"JetBlue Airways","amount":0},"JCS":{"name":"Jetclub","amount":0},"QNZ":{"name":"Jetconnect","amount":0},"JLL":{"name":"JetLite","amount":0},"MDJ":{"name":"Jetran Air","amount":0},"JST":{"name":"Jetstar Airways","amount":0},"JSA":{"name":"Jetstar Asia","amount":0},"JJP":{"name":"Jetstar Japan","amount":0},"JNA":{"name":"Jin Air","amount":0},"JAV":{"name":"Jordan Aviation","amount":0},"DKH":{"name":"Juneyao Airlines","amount":0},"KAY":{"name":"K5-Aviation Germany","amount":0},"CKS":{"name":"Kalitta Air","amount":0},"KFS":{"name":"Kalitta Charters","amount":0},"KLS":{"name":"KalStar Aviation","amount":0},"KMF":{"name":"Kam-Air","amount":0},"KQA":{"name":"Kenya Airways","amount":0},"LYM":{"name":"Key Lime Air","amount":0},"KFA":{"name":"KF Cargo","amount":0},"KHK":{"name":"Kharkiv Airlines","amount":0},"DKN":{"name":"Kingfisher Red","amount":0},"KLM":{"name":"KLM","amount":0},"MVD":{"name":"KMV Avia","amount":0},"KGL":{"name":"Kolavia","amount":0},"KBR":{"name":"KoralBlue Airlines","amount":0},"KAL":{"name":"Korean Air","amount":0},"KGO":{"name":"Korongo Airlines","amount":0},"KSM":{"name":"Kosmos Airlines","amount":0},"KIL":{"name":"Kuban Airlines","amount":0},"CAW":{"name":"Kulula.com","amount":0},"KNA":{"name":"Kunming Airlines","amount":0},"KAC":{"name":"Kuwait Airways","amount":0},"KGZ":{"name":"Kyrgyz Airlines","amount":0},"KGA":{"name":"Kyrgyzstan Airlines","amount":0},"DJT":{"name":"La Compagnie","amount":0},"LAM":{"name":"LAM Mozambique Airlines","amount":0},"LAN":{"name":"LAN Airlines","amount":0},"DSM":{"name":"LAN Argentina","amount":0},"LCO":{"name":"LAN Cargo","amount":0},"ARE":{"name":"LAN Colombia","amount":0},"LNE":{"name":"LAN Ecuador","amount":0},"LPE":{"name":"LAN Peru","amount":0},"LAO":{"name":"Lao Airlines","amount":0},"LER":{"name":"Laser Airlines","amount":0},"LIA":{"name":"LIAT","amount":0},"LAA":{"name":"Libyan Airlines","amount":0},"LNI":{"name":"Lion Airlines","amount":0},"NLV":{"name":"Livingston","amount":0},"LOG":{"name":"Loganair","amount":0},"LOT":{"name":"LOT","amount":0},"LTE":{"name":"LTE","amount":0},"LKE":{"name":"Lucky Air","amount":0},"LGW":{"name":"Luftfahrtgesellschaft Walter","amount":0},"DLH":{"name":"Lufthansa","amount":0},"GEC":{"name":"Lufthansa Cargo","amount":0},"CLH":{"name":"Lufthansa CityLine","amount":0},"LTR":{"name":"Lufttransport","amount":0},"GAF":{"name":"Luftwaffe","amount":0},"LGL":{"name":"Luxair","amount":0},"LUZ":{"name":"Luzair","amount":0},"LYC":{"name":"Lynden Air Cargo","amount":0},"IRM":{"name":"Mahan Air","amount":0},"MWI":{"name":"Malawian Airlines","amount":0},"MAS":{"name":"Malaysia Airlines","amount":0},"DQA":{"name":"Maldivian","amount":0},"MAT":{"name":"Maldivian Air Taxi","amount":0},"MXD":{"name":"Malindo Air","amount":0},"SCW":{"name":"Malmo Aviation","amount":0},"MDA":{"name":"Mandarin Airlines","amount":0},"MNO":{"name":"Mango","amount":0},"MPH":{"name":"Martinair Holland","amount":0},"MAA":{"name":"MasAir","amount":0},"MWG":{"name":"MASwings","amount":0},"MAI":{"name":"Mauritania Airlines International","amount":0},"MTW":{"name":"Mauritania Airways","amount":0},"MAX":{"name":"Max Aviation","amount":0},"SUM":{"name":"MCHS Rossii","amount":0},"MEG":{"name":"Mega Maldives","amount":0},"MRJ":{"name":"Meraj Air","amount":0},"ISS":{"name":"Meridiana","amount":0},"MNA":{"name":"Merpati","amount":0},"ASH":{"name":"Mesa Airlines","amount":0},"MXA":{"name":"Mexicana","amount":0},"BSK":{"name":"Miami Air International","amount":0},"MGL":{"name":"MIAT Mongolian Airlines","amount":0},"MEA":{"name":"Middle East Airlines","amount":0},"MIX":{"name":"Midex Airlines","amount":0},"MLR":{"name":"Mihin Lanka","amount":0},"MAV":{"name":"Minoan Air","amount":0},"MIC":{"name":"Mint Airways","amount":0},"MSA":{"name":"Mistral Air","amount":0},"MJF":{"name":"MJet","amount":0},"MNB":{"name":"MNG Airlines","amount":0},"MDV":{"name":"Moldavian Airlines","amount":0},"MON":{"name":"Monarch Airlines","amount":0},"MGX":{"name":"Montenegro Airlines","amount":0},"MAL":{"name":"Morningstar Air Express","amount":0},"GAI":{"name":"Moskovia Airlines","amount":0},"MSI":{"name":"Motor Sich Airlines","amount":0},"NZM":{"name":"Mount Cook Airline","amount":0},"MRW":{"name":"MRK Airlines","amount":0},"MYW":{"name":"MyAir","amount":0},"MMA":{"name":"Myanmar Airways International","amount":0},"MYT":{"name":"MyTravel Airways","amount":0},"IRG":{"name":"Naft Airlines","amount":0},"NTW":{"name":"Nationwide Airlines","amount":0},"NRR":{"name":"Nature Air","amount":0},"NOS":{"name":"Neos","amount":0},"NMA":{"name":"Nesma Airlines","amount":0},"NJE":{"name":"NetJets","amount":0},"NTJ":{"name":"NextJet","amount":0},"NLY":{"name":"Niki","amount":0},"NIA":{"name":"Nile Air","amount":0},"NCA":{"name":"Nippon Cargo Airlines","amount":0},"NOK":{"name":"Nok Air","amount":0},"AUL":{"name":"Nordavia","amount":0},"NGB":{"name":"Nordic Global Airlines","amount":0},"TYA":{"name":"NordStar","amount":0},"NWS":{"name":"Nordwind Airlines","amount":0},"NAO":{"name":"North American Airlines","amount":0},"NFA":{"name":"North Flying","amount":0},"NAC":{"name":"Northern Air Cargo","amount":0},"NWA":{"name":"Northwest Airlines","amount":0},"NAX":{"name":"Norwegian","amount":0},"LBT":{"name":"Nouvelair Tunisie","amount":0},"NOV":{"name":"Nova Airways","amount":0},"NVR":{"name":"Novair","amount":0},"OKA":{"name":"Okay Airways","amount":0},"OAL":{"name":"Olympic Air","amount":0},"OMA":{"name":"Oman Air","amount":0},"OAV":{"name":"Omni","amount":0},"OAE":{"name":"Omni Air International","amount":0},"OHY":{"name":"Onur Air","amount":0},"BOS":{"name":"Open Skies","amount":0},"OBS":{"name":"Orbest","amount":0},"ORB":{"name":"Orenair","amount":0},"OEA":{"name":"Orient Thai Airlines","amount":0},"RON":{"name":"Our Airline","amount":0},"PIC":{"name":"Pacific Airlines","amount":0},"PCO":{"name":"Pacific Coastal Airlines","amount":0},"PIA":{"name":"Pakistan Int. Airlines","amount":0},"GAP":{"name":"PAL Express","amount":0},"PNR":{"name":"PAN Air","amount":0},"PSC":{"name":"Pascan Aviation","amount":0},"PTB":{"name":"Passaredo Linhas Aereas","amount":0},"APJ":{"name":"Peach Aviation","amount":0},"PGT":{"name":"Pegasus Airlines","amount":0},"MBB":{"name":"Pegasus Asia","amount":0},"PEN":{"name":"Penair","amount":0},"PEV":{"name":"People's Viennaline","amount":0},"PAG":{"name":"Perimeter Aviation","amount":0},"PVN":{"name":"Peruvian Airlines","amount":0},"PAL":{"name":"Philippine Airlines","amount":0},"APG":{"name":"Philippines AirAsia","amount":0},"PDT":{"name":"Piedmont Airlines","amount":0},"PBD":{"name":"Pobeda","amount":0},"PAC":{"name":"Polar Air Cargo","amount":0},"POT":{"name":"Polet Airlines","amount":0},"POE":{"name":"Porter Airlines","amount":0},"PGA":{"name":"Portugalia","amount":0},"PRF":{"name":"Precision Air","amount":0},"PRI":{"name":"Primera Air","amount":0},"PWF":{"name":"Private Wings","amount":0},"PVG":{"name":"Privilege Style","amount":0},"PFZ":{"name":"Proflight Air Services","amount":0},"JIA":{"name":"PSA Airlines","amount":0},"QFA":{"name":"Qantas","amount":0},"QLK":{"name":"QantasLink","amount":0},"QTR":{"name":"Qatar Airways","amount":0},"QAF":{"name":"Qatar Airways Amiri Flight","amount":0},"QSM":{"name":"Qeshm Airlines","amount":0},"RKM":{"name":"RAK Airways","amount":0},"RWZ":{"name":"Red Wings","amount":0},"RGE":{"name":"Regent Airways","amount":0},"RAE":{"name":"Regional","amount":0},"RXA":{"name":"Regional Express","amount":0},"REG":{"name":"Regourd Aviation","amount":0},"RPA":{"name":"Republic Airlines","amount":0},"RMV":{"name":"Romavia","amount":0},"SDM":{"name":"Rossiya","amount":0},"RJD":{"name":"Rotana Jet Aviation","amount":0},"RRR":{"name":"Royal Air Force","amount":0},"MJN":{"name":"Royal Air Force of Oman","amount":0},"RAM":{"name":"Royal Air Maroc","amount":0},"ASY":{"name":"Royal Australian Air Force","amount":0},"RBA":{"name":"Royal Brunei Airlines","amount":0},"RFJ":{"name":"Royal Falcon","amount":0},"ABG":{"name":"Royal Flight","amount":0},"RJA":{"name":"Royal Jordanian","amount":0},"RNA":{"name":"Royal Nepal Airlines","amount":0},"RLB":{"name":"RUS Aviation","amount":0},"CGI":{"name":"RusAir","amount":0},"RLU":{"name":"Rusline","amount":0},"RSD":{"name":"Russia Air Force","amount":0},"ESL":{"name":"Russian Sky Airlines","amount":0},"RWD":{"name":"RwandAir","amount":0},"RYN":{"name":"Ryan Intl Airlines","amount":0},"RYR":{"name":"Ryanair","amount":0},"SBI":{"name":"S7 Airlines","amount":0},"SFR":{"name":"Safair","amount":0},"SFW":{"name":"Safi Airways","amount":0},"SGX":{"name":"Saga Airlines","amount":0},"SMY":{"name":"Sama Airlines","amount":0},"LRS":{"name":"Sansa Airlines","amount":0},"SOV":{"name":"Saravia","amount":0},"SAS":{"name":"SAS","amount":0},"SAT":{"name":"SATA Air Acores","amount":0},"RZO":{"name":"SATA International","amount":0},"NSE":{"name":"Satena","amount":0},"SVA":{"name":"Saudi Arabian Airlines","amount":0},"BBR":{"name":"SBA Airlines","amount":0},"VSV":{"name":"SCAT","amount":0},"SCO":{"name":"Scoot","amount":0},"SGG":{"name":"Senegal Airlines","amount":0},"SSF":{"name":"Severstal Aircompany","amount":0},"CSS":{"name":"SF Airlines","amount":0},"SAI":{"name":"Shaheen Air International","amount":0},"CDG":{"name":"Shandong Airlines","amount":0},"CSH":{"name":"Shanghai Airlines","amount":0},"CSZ":{"name":"Shenzhen Airlines","amount":0},"TCF":{"name":"Shuttle America","amount":0},"SGN":{"name":"Siam General Aviation","amount":0},"CSC":{"name":"Sichuan Airlines","amount":0},"AZQ":{"name":"Silk Way Airlines","amount":0},"AZG":{"name":"Silk Way West Airlines","amount":0},"SLK":{"name":"SilkAir","amount":0},"SIL":{"name":"Silver Airways","amount":0},"SIA":{"name":"Singapore Airlines","amount":0},"SQC":{"name":"Singapore Airlines Cargo","amount":0},"SKU":{"name":"Sky Airline","amount":0},"SEH":{"name":"Sky Express (Greece)","amount":0},"SGB":{"name":"Sky King","amount":0},"SKV":{"name":"Sky Regional Airlines","amount":0},"KYB":{"name":"Skybridge","amount":0},"IOS":{"name":"Skybus","amount":0},"SKK":{"name":"SkyLink Aviation","amount":0},"SKY":{"name":"Skymark Airlines","amount":0},"SSV":{"name":"Skyservice Airlines","amount":0},"IGA":{"name":"Skytaxi","amount":0},"SKP":{"name":"Skytrans","amount":0},"SKW":{"name":"SkyWest Airlines","amount":0},"SWM":{"name":"Skywings Asia Airlines ","amount":0},"SWZ":{"name":"Skywise Airlines","amount":0},"SRK":{"name":"SkyWork Airlines","amount":0},"LLC":{"name":"Small Planet Airlines","amount":0},"LLP":{"name":"Small Planet Airlines Polska","amount":0},"SME":{"name":"Smart Aviation","amount":0},"ART":{"name":"SmartLynx","amount":0},"MYX":{"name":"SmartLynx Airlines Estonia","amount":0},"OLS":{"name":"Sol Lineas Aereas","amount":0},"SNJ":{"name":"Solaseed Air","amount":0},"SOX":{"name":"Solid Air","amount":0},"SOL":{"name":"Solomon Airlines","amount":0},"SMR":{"name":"Somon Air","amount":0},"SOR":{"name":"SonAir","amount":0},"SAA":{"name":"South African Airways","amount":0},"EXY":{"name":"South African Express","amount":0},"OTL":{"name":"South Airlines","amount":0},"SOO":{"name":"Southern Air","amount":0},"SWA":{"name":"Southwest Airlines","amount":0},"SEJ":{"name":"SpiceJet","amount":0},"NKS":{"name":"Spirit Airlines","amount":0},"CQH":{"name":"Spring Airlines","amount":0},"SRN":{"name":"Sprint Air","amount":0},"ALK":{"name":"SriLankan Airlines","amount":0},"SJY":{"name":"Sriwijaya Air","amount":0},"SRR":{"name":"Star Air (Denmark)","amount":0},"SRU":{"name":"Star Peru","amount":0},"IKM":{"name":"Starbow Airlines","amount":0},"SFJ":{"name":"Starflyer","amount":0},"STK":{"name":"Stobart Air","amount":0},"STU":{"name":"Strategic Airlines Luxemburg","amount":0},"FFD":{"name":"Stuttgarter Flugdienst","amount":0},"SAY":{"name":"Suckling Airways","amount":0},"SUD":{"name":"Sudan Airways","amount":0},"SCX":{"name":"Sun Country Airlines","amount":0},"SUS":{"name":"Sun-Air","amount":0},"SXS":{"name":"SunExpress","amount":0},"SXD":{"name":"SunExpress Deutschland","amount":0},"SWG":{"name":"Sunwing Airlines","amount":0},"SLM":{"name":"Surinam Airways","amount":0},"SWQ":{"name":"Swift Air","amount":0},"SWT":{"name":"Swiftair","amount":0},"SWR":{"name":"Swiss","amount":0},"SAZ":{"name":"Swiss Air-Ambulance","amount":0},"SYA":{"name":"Syphax Airlines","amount":0},"SYR":{"name":"Syrian Air","amount":0},"TWB":{"name":"T'way Air","amount":0},"DTA":{"name":"TAAG Angola Airlines","amount":0},"TBM":{"name":"Taban Air","amount":0},"TAI":{"name":"TACA Airlines","amount":0},"TCV":{"name":"TACV Cape Verde Airlines","amount":0},"FPG":{"name":"TAG Aviation","amount":0},"TWI":{"name":"Tailwind Airlines","amount":0},"TJK":{"name":"Tajik Air","amount":0},"TAM":{"name":"TAM Linhas Aereas","amount":0},"TAE":{"name":"TAME","amount":0},"TAP":{"name":"TAP Portugal","amount":0},"TRQ":{"name":"Tarco Airlines","amount":0},"ROT":{"name":"Tarom","amount":0},"DTH":{"name":"Tassili Airlines","amount":0},"TAK":{"name":"Tatarstan Air","amount":0},"OTJ":{"name":"Ten Airways","amount":0},"AIQ":{"name":"Thai AirAsia","amount":0},"TAX":{"name":"Thai AirAsia X","amount":0},"THA":{"name":"Thai Airways","amount":0},"TLM":{"name":"Thai Lion Air","amount":0},"THD":{"name":"Thai Smile","amount":0},"TCX":{"name":"Thomas Cook Airlines","amount":0},"TCW":{"name":"Thomas Cook Airlines Belgium","amount":0},"VKG":{"name":"Thomas Cook Airlines Scandinavia","amount":0},"TOM":{"name":"Thomson Airways","amount":0},"GCR":{"name":"Tianjin Airlines","amount":0},"TBA":{"name":"Tibet Airlines","amount":0},"TGW":{"name":"Tigerair Australia","amount":0},"SRQ":{"name":"Tigerair Philippines","amount":0},"TTW":{"name":"Tigerair Taiwan","amount":0},"AWC":{"name":"Titan Airways","amount":0},"TAY":{"name":"TNT Airways","amount":0},"THE":{"name":"Toumai Air Tchad","amount":0},"TDR":{"name":"Trade Air","amount":0},"TSG":{"name":"Trans Air Congo","amount":0},"TMW":{"name":"Trans Maldivian Airways","amount":0},"TMA":{"name":"Trans Mediterranean Airways","amount":0},"LOF":{"name":"Trans States Airlines","amount":0},"TSO":{"name":"Transaero Airlines","amount":0},"TNA":{"name":"TransAsia Airways","amount":0},"TRA":{"name":"Transavia","amount":0},"TVF":{"name":"Transavia France","amount":0},"TXC":{"name":"Transaviaexport Airlines","amount":0},"TSE":{"name":"Transmile Air Services","amount":0},"TVS":{"name":"Travel Service","amount":0},"TVL":{"name":"Travel Service Hungary","amount":0},"TVQ":{"name":"Travel Service Slovakia","amount":0},"TGN":{"name":"Trigana Air Service","amount":0},"TIB":{"name":"Trip Linhas Aereas","amount":0},"TUI":{"name":"TUIfly","amount":0},"BLX":{"name":"TUIfly Nordic","amount":0},"TAR":{"name":"Tunisair","amount":0},"TUX":{"name":"Tunisair Express","amount":0},"THY":{"name":"Turkish Airlines","amount":0},"TUA":{"name":"Turkmenistan Airlines","amount":0},"TRK":{"name":"Turkuaz Airlines","amount":0},"TJT":{"name":"Twin Jet","amount":0},"TYW":{"name":"Tyrol Air Ambulance","amount":0},"TYR":{"name":"Tyrolean Airways","amount":0},"AUI":{"name":"Ukraine Int. Airlines","amount":0},"UKM":{"name":"Ukrainian Mediterranean Airlines","amount":0},"KZU":{"name":"ULS Airlines Cargo","amount":0},"UIA":{"name":"UNI Air","amount":0},"UAL":{"name":"United Airlines","amount":0},"UBD":{"name":"United Airways","amount":0},"UPS":{"name":"UPS Airlines","amount":0},"SVR":{"name":"Ural Airlines","amount":0},"AWE":{"name":"US Airways","amount":0},"JUS":{"name":"USA Jet Airlines","amount":0},"UTA":{"name":"UTair","amount":0},"UTN":{"name":"UTair Ukraine","amount":0},"UZB":{"name":"Uzbekistan Airways","amount":0},"VNL":{"name":"Vanilla Air","amount":0},"VNE":{"name":"Venezolana","amount":0},"VTF":{"name":"Veteran Airline","amount":0},"VJC":{"name":"VietJetAir","amount":0},"VFC":{"name":"Vietnam Air Services Company","amount":0},"HVN":{"name":"Vietnam Airlines","amount":0},"MOV":{"name":"VIM Airlines","amount":0},"VRD":{"name":"Virgin America","amount":0},"VIR":{"name":"Virgin Atlantic Airways","amount":0},"VOZ":{"name":"Virgin Australia","amount":0},"OZW":{"name":"Virgin Australia Regional","amount":0},"RBY":{"name":"Vision Airlines","amount":0},"VIV":{"name":"VivaAerobus","amount":0},"VVC":{"name":"VivaColombia","amount":0},"VLK":{"name":"Vladivostok Air","amount":0},"VLE":{"name":"Volareweb","amount":0},"VOI":{"name":"Volaris","amount":0},"VDA":{"name":"Volga-Dnepr Airlines","amount":0},"VOE":{"name":"Volotea","amount":0},"VAL":{"name":"Voyageur Airways","amount":0},"VLG":{"name":"Vueling","amount":0},"PLM":{"name":"Wamos Air","amount":0},"WSG":{"name":"Wasaya Airways","amount":0},"WDL":{"name":"WDL Aviation","amount":0},"WEB":{"name":"Webjet","amount":0},"WLC":{"name":"Welcome Air","amount":0},"WLX":{"name":"West Air","amount":0},"SWN":{"name":"West Air Sweden","amount":0},"WEW":{"name":"West Wind Aviation","amount":0},"WJA":{"name":"WestJet","amount":0},"WEN":{"name":"WestJet Encore","amount":0},"WHT":{"name":"White","amount":0},"WIF":{"name":"Wideroe","amount":0},"WRC":{"name":"Windrose","amount":0},"QGA":{"name":"Windrose Air","amount":0},"WON":{"name":"Wings Air","amount":0},"WZZ":{"name":"Wizz Air","amount":0},"WOA":{"name":"World Airways","amount":0},"WAL":{"name":"World Atlantic Airlines","amount":0},"WOW":{"name":"WOW air","amount":0},"CXA":{"name":"Xiamen Airlines","amount":0},"XLF":{"name":"XL Airways France","amount":0},"SYL":{"name":"Yakutia Airlines","amount":0},"LLM":{"name":"Yamal Airlines","amount":0},"ANR":{"name":"YanAir","amount":0},"YZR":{"name":"Yangtze River Express","amount":0},"IYE":{"name":"Yemenia","amount":0},"NYT":{"name":"Yeti Airlines","amount":0},"IZG":{"name":"Zagros Airlines","amount":0},"GZQ":{"name":"ZagrosJet","amount":0},"ZMA":{"name":"Zambezi Airlines","amount":0},"CDC":{"name":"Zhejiang Loong Airlines","amount":0}};


Object.size = function(obj) {
    var size = 0, key;
    for (key in obj) {
        if (obj.hasOwnProperty(key)) size++;
    }
    return size;
};

var getData = function (req,res){
	var json;
	var flightData = [];

	async.series([
    	function(callback){
    		request(api_url, function (error, response, body) {
			  if (!error && response.statusCode == 200) {
			  	json = JSON.parse(body)
			  	callback();
			  }
			});
    	},
    	function(callback){
    		var size = Object.size(json);
    		var count = 0;
    		var loaded = 0;
    		for(var key in json){
    			count++;
    			request(api_detail_url + 'f='+ key +'&altitude='+ json[key][4] +'&equip_hint='+ json[key][8] +'&format=2&_='+ json[key][10], function (error, response, body) {
				  if (!error && response.statusCode == 200) {
				  		var data = JSON.parse(body)
				  		loaded++;
						for(var k in data){
							flightData.push(data[k])
						}
						if(count == size && count == loaded){
							callback();
						}
				  }
				});
			}			
    	}
	],function(err, results){
		console.log(flightData)
	});
}

var getSimpleData = function (req,res){
	var json;
	var flightData = [];

	request(api_url, function (error, response, body) {
	  if (!error && response.statusCode == 200) {
	  	json = JSON.parse(body)
	  	
		res.send(json).status(200).end();
	  }
	});
}

var getAirlines = function (req,res){
	var json;
	var flightData = [];

	request(api_url, function (error, response, body) {
	  if (!error && response.statusCode == 200) {
	  	json = JSON.parse(body)

	  	for(var e in json){
	  		if(e != 'stats' && typeof json[e] === 'object'){

	  			var shortcut = json[e][16].match(/([A-Z])+/);
	  			for(var s in shortcut){
	  				if(typeof(airlines[shortcut[s]]) !== 'undefined'){
			  			if(typeof airlines[shortcut[s]].amount === 'undefined'){
							airlines[shortcut[s]].amount = 0;		
				  		}
				  		airlines[shortcut[s]].amount += 1;
			  		}
	  				if(s == '0') break;
	  			}
	  		}
	  	}

	  	var returnVar = airlines;
	  	for(var e in returnVar){
	  		if(returnVar[e].amount == 0) delete airlines[e];
	  	}

		res.send(returnVar).status(200).end();
	  }
	});
}

module.exports = {
	getData : getData,
	getSimpleData : getSimpleData,
	getAirlines : getAirlines
}